var $app = angular.module('myApp', ["ngRoute", "firebase"]);

$app.config(['$routeProvider', function($routeProvider){
    $routeProvider.when('/', {
        templateUrl: '/views/welcome.html',
        controller: "WelcomeController"
    })
    .when('/chat', {
        templateUrl: '/views/chat.html',
        controller: "ChatController"
    });
}]);

$app.factory('UserFactory', function(){
    var user;

    return {
        get: function(){
            return user;
        },
        set: function(newUser){
            user = newUser;
        }
    };
});

$app.controller("WelcomeController", [
    '$scope', 'UserFactory', '$location',
    function($scope, UserFactory, $location){
        $scope.userLogin = function(){
            var nickUser = $scope.user.nick;

            UserFactory.set({
                nick: nickUser
            });

            return $location.path('/chat');
        }
    }
]);